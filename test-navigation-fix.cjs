const fs = require('fs');
const path = require('path');

console.log('üîç Testando corre√ß√µes de navega√ß√£o...\n');

// Teste 1: Verificar se MicrosoftHeader est√° usando useNavigate
console.log('1. Verificando MicrosoftHeader...');
try {
  const microsoftHeaderPath = path.join(__dirname, 'src', 'components', 'dashboard', 'MicrosoftHeader.tsx');
  const content = fs.readFileSync(microsoftHeaderPath, 'utf8');
  
  const hasUseNavigate = content.includes('useNavigate');
  const hasUseLocation = content.includes('useLocation');
  const hasNavigationLogic = content.includes('navigate(section.path)');
  const hasPathMapping = content.includes('path:');
  
  console.log(`   ‚úÖ useNavigate importado: ${hasUseNavigate}`);
  console.log(`   ‚úÖ useLocation importado: ${hasUseLocation}`);
  console.log(`   ‚úÖ L√≥gica de navega√ß√£o implementada: ${hasNavigationLogic}`);
  console.log(`   ‚úÖ Mapeamento de rotas: ${hasPathMapping}`);
  
  if (hasUseNavigate && hasUseLocation && hasNavigationLogic && hasPathMapping) {
    console.log('   üéâ MicrosoftHeader corrigido com sucesso!');
  } else {
    console.log('   ‚ùå MicrosoftHeader ainda precisa de corre√ß√µes');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar MicrosoftHeader:', error.message);
}

// Teste 2: Verificar se MobileAppAreaSwitcher est√° usando useNavigate
console.log('\n2. Verificando MobileAppAreaSwitcher...');
try {
  const mobileSwitcherPath = path.join(__dirname, 'src', 'components', 'nav', 'MobileAppAreaSwitcher.tsx');
  const content = fs.readFileSync(mobileSwitcherPath, 'utf8');
  
  const hasUseNavigate = content.includes('useNavigate');
  const hasUseLocation = content.includes('useLocation');
  const hasNavigationLogic = content.includes('navigate(area.path)');
  const hasPathMapping = content.includes('path:');
  
  console.log(`   ‚úÖ useNavigate importado: ${hasUseNavigate}`);
  console.log(`   ‚úÖ useLocation importado: ${hasUseLocation}`);
  console.log(`   ‚úÖ L√≥gica de navega√ß√£o implementada: ${hasNavigationLogic}`);
  console.log(`   ‚úÖ Mapeamento de rotas: ${hasPathMapping}`);
  
  if (hasUseNavigate && hasUseLocation && hasNavigationLogic && hasPathMapping) {
    console.log('   üéâ MobileAppAreaSwitcher corrigido com sucesso!');
  } else {
    console.log('   ‚ùå MobileAppAreaSwitcher ainda precisa de corre√ß√µes');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar MobileAppAreaSwitcher:', error.message);
}

// Teste 3: Verificar se AppAreaSwitcher est√° funcionando
console.log('\n3. Verificando AppAreaSwitcher...');
try {
  const appSwitcherPath = path.join(__dirname, 'src', 'components', 'nav', 'AppAreaSwitcher.tsx');
  const content = fs.readFileSync(appSwitcherPath, 'utf8');
  
  const hasUseNavigate = content.includes('useNavigate');
  const hasNavigationLogic = content.includes('navigate(item.path)');
  const hasNavItems = content.includes('navItems');
  
  console.log(`   ‚úÖ useNavigate importado: ${hasUseNavigate}`);
  console.log(`   ‚úÖ L√≥gica de navega√ß√£o implementada: ${hasNavigationLogic}`);
  console.log(`   ‚úÖ Usando navItems: ${hasNavItems}`);
  
  if (hasUseNavigate && hasNavigationLogic && hasNavItems) {
    console.log('   üéâ AppAreaSwitcher j√° est√° funcionando corretamente!');
  } else {
    console.log('   ‚ùå AppAreaSwitcher precisa de corre√ß√µes');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar AppAreaSwitcher:', error.message);
}

// Teste 4: Verificar se as rotas est√£o mapeadas corretamente
console.log('\n4. Verificando mapeamento de rotas...');
try {
  const navItemsPath = path.join(__dirname, 'src', 'lib', 'navItems.ts');
  const content = fs.readFileSync(navItemsPath, 'utf8');
  
  const routes = [
    '/dashboard',
    '/populacao', 
    '/barras',
    '/radar',
    '/dashboard/executivo',
    '/dashboard/detalhamento',
    '/dashboard/recomendacoes',
    '/dashboard/avancada'
  ];
  
  let allRoutesFound = true;
  routes.forEach(route => {
    const found = content.includes(`path: '${route}'`);
    console.log(`   ${found ? '‚úÖ' : '‚ùå'} Rota ${route}: ${found ? 'Encontrada' : 'N√£o encontrada'}`);
    if (!found) allRoutesFound = false;
  });
  
  if (allRoutesFound) {
    console.log('   üéâ Todas as rotas est√£o mapeadas corretamente!');
  } else {
    console.log('   ‚ùå Algumas rotas est√£o faltando');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar rotas:', error.message);
}

// Teste 5: Verificar se App.tsx tem todas as rotas
console.log('\n5. Verificando App.tsx...');
try {
  const appPath = path.join(__dirname, 'src', 'App.tsx');
  const content = fs.readFileSync(appPath, 'utf8');
  
  const routes = [
    '/dashboard',
    '/populacao', 
    '/barras',
    '/radar',
    '/dashboard/executivo',
    '/dashboard/detalhamento',
    '/dashboard/recomendacoes',
    '/dashboard/avancada'
  ];
  
  let allRoutesFound = true;
  routes.forEach(route => {
    const found = content.includes(`path="${route}"`);
    console.log(`   ${found ? '‚úÖ' : '‚ùå'} Rota ${route}: ${found ? 'Encontrada' : 'N√£o encontrada'}`);
    if (!found) allRoutesFound = false;
  });
  
  if (allRoutesFound) {
    console.log('   üéâ Todas as rotas est√£o definidas no App.tsx!');
  } else {
    console.log('   ‚ùå Algumas rotas est√£o faltando no App.tsx');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar App.tsx:', error.message);
}

console.log('\nüìã Resumo das corre√ß√µes implementadas:');
console.log('   ‚Ä¢ MicrosoftHeader agora usa useNavigate para navega√ß√£o entre rotas');
console.log('   ‚Ä¢ MobileAppAreaSwitcher agora usa useNavigate para navega√ß√£o entre rotas');
console.log('   ‚Ä¢ Mapeamento de rotas consistente entre todos os componentes');
console.log('   ‚Ä¢ Determina√ß√£o da se√ß√£o ativa baseada na rota atual');
console.log('   ‚Ä¢ Fallback para navega√ß√£o interna quando necess√°rio');

console.log('\nüöÄ Para testar as corre√ß√µes:');
console.log('   1. Execute: npm run dev');
console.log('   2. Navegue para diferentes √°reas usando o menu');
console.log('   3. Verifique se a URL muda corretamente');
console.log('   4. Teste em dispositivos m√≥veis e desktop'); 
const path = require('path');

console.log('üîç Testando corre√ß√µes de navega√ß√£o...\n');

// Teste 1: Verificar se MicrosoftHeader est√° usando useNavigate
console.log('1. Verificando MicrosoftHeader...');
try {
  const microsoftHeaderPath = path.join(__dirname, 'src', 'components', 'dashboard', 'MicrosoftHeader.tsx');
  const content = fs.readFileSync(microsoftHeaderPath, 'utf8');
  
  const hasUseNavigate = content.includes('useNavigate');
  const hasUseLocation = content.includes('useLocation');
  const hasNavigationLogic = content.includes('navigate(section.path)');
  const hasPathMapping = content.includes('path:');
  
  console.log(`   ‚úÖ useNavigate importado: ${hasUseNavigate}`);
  console.log(`   ‚úÖ useLocation importado: ${hasUseLocation}`);
  console.log(`   ‚úÖ L√≥gica de navega√ß√£o implementada: ${hasNavigationLogic}`);
  console.log(`   ‚úÖ Mapeamento de rotas: ${hasPathMapping}`);
  
  if (hasUseNavigate && hasUseLocation && hasNavigationLogic && hasPathMapping) {
    console.log('   üéâ MicrosoftHeader corrigido com sucesso!');
  } else {
    console.log('   ‚ùå MicrosoftHeader ainda precisa de corre√ß√µes');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar MicrosoftHeader:', error.message);
}

// Teste 2: Verificar se MobileAppAreaSwitcher est√° usando useNavigate
console.log('\n2. Verificando MobileAppAreaSwitcher...');
try {
  const mobileSwitcherPath = path.join(__dirname, 'src', 'components', 'nav', 'MobileAppAreaSwitcher.tsx');
  const content = fs.readFileSync(mobileSwitcherPath, 'utf8');
  
  const hasUseNavigate = content.includes('useNavigate');
  const hasUseLocation = content.includes('useLocation');
  const hasNavigationLogic = content.includes('navigate(area.path)');
  const hasPathMapping = content.includes('path:');
  
  console.log(`   ‚úÖ useNavigate importado: ${hasUseNavigate}`);
  console.log(`   ‚úÖ useLocation importado: ${hasUseLocation}`);
  console.log(`   ‚úÖ L√≥gica de navega√ß√£o implementada: ${hasNavigationLogic}`);
  console.log(`   ‚úÖ Mapeamento de rotas: ${hasPathMapping}`);
  
  if (hasUseNavigate && hasUseLocation && hasNavigationLogic && hasPathMapping) {
    console.log('   üéâ MobileAppAreaSwitcher corrigido com sucesso!');
  } else {
    console.log('   ‚ùå MobileAppAreaSwitcher ainda precisa de corre√ß√µes');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar MobileAppAreaSwitcher:', error.message);
}

// Teste 3: Verificar se AppAreaSwitcher est√° funcionando
console.log('\n3. Verificando AppAreaSwitcher...');
try {
  const appSwitcherPath = path.join(__dirname, 'src', 'components', 'nav', 'AppAreaSwitcher.tsx');
  const content = fs.readFileSync(appSwitcherPath, 'utf8');
  
  const hasUseNavigate = content.includes('useNavigate');
  const hasNavigationLogic = content.includes('navigate(item.path)');
  const hasNavItems = content.includes('navItems');
  
  console.log(`   ‚úÖ useNavigate importado: ${hasUseNavigate}`);
  console.log(`   ‚úÖ L√≥gica de navega√ß√£o implementada: ${hasNavigationLogic}`);
  console.log(`   ‚úÖ Usando navItems: ${hasNavItems}`);
  
  if (hasUseNavigate && hasNavigationLogic && hasNavItems) {
    console.log('   üéâ AppAreaSwitcher j√° est√° funcionando corretamente!');
  } else {
    console.log('   ‚ùå AppAreaSwitcher precisa de corre√ß√µes');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar AppAreaSwitcher:', error.message);
}

// Teste 4: Verificar se as rotas est√£o mapeadas corretamente
console.log('\n4. Verificando mapeamento de rotas...');
try {
  const navItemsPath = path.join(__dirname, 'src', 'lib', 'navItems.ts');
  const content = fs.readFileSync(navItemsPath, 'utf8');
  
  const routes = [
    '/dashboard',
    '/populacao', 
    '/barras',
    '/radar',
    '/dashboard/executivo',
    '/dashboard/detalhamento',
    '/dashboard/recomendacoes',
    '/dashboard/avancada'
  ];
  
  let allRoutesFound = true;
  routes.forEach(route => {
    const found = content.includes(`path: '${route}'`);
    console.log(`   ${found ? '‚úÖ' : '‚ùå'} Rota ${route}: ${found ? 'Encontrada' : 'N√£o encontrada'}`);
    if (!found) allRoutesFound = false;
  });
  
  if (allRoutesFound) {
    console.log('   üéâ Todas as rotas est√£o mapeadas corretamente!');
  } else {
    console.log('   ‚ùå Algumas rotas est√£o faltando');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar rotas:', error.message);
}

// Teste 5: Verificar se App.tsx tem todas as rotas
console.log('\n5. Verificando App.tsx...');
try {
  const appPath = path.join(__dirname, 'src', 'App.tsx');
  const content = fs.readFileSync(appPath, 'utf8');
  
  const routes = [
    '/dashboard',
    '/populacao', 
    '/barras',
    '/radar',
    '/dashboard/executivo',
    '/dashboard/detalhamento',
    '/dashboard/recomendacoes',
    '/dashboard/avancada'
  ];
  
  let allRoutesFound = true;
  routes.forEach(route => {
    const found = content.includes(`path="${route}"`);
    console.log(`   ${found ? '‚úÖ' : '‚ùå'} Rota ${route}: ${found ? 'Encontrada' : 'N√£o encontrada'}`);
    if (!found) allRoutesFound = false;
  });
  
  if (allRoutesFound) {
    console.log('   üéâ Todas as rotas est√£o definidas no App.tsx!');
  } else {
    console.log('   ‚ùå Algumas rotas est√£o faltando no App.tsx');
  }
} catch (error) {
  console.log('   ‚ùå Erro ao verificar App.tsx:', error.message);
}

console.log('\nüìã Resumo das corre√ß√µes implementadas:');
console.log('   ‚Ä¢ MicrosoftHeader agora usa useNavigate para navega√ß√£o entre rotas');
console.log('   ‚Ä¢ MobileAppAreaSwitcher agora usa useNavigate para navega√ß√£o entre rotas');
console.log('   ‚Ä¢ Mapeamento de rotas consistente entre todos os componentes');
console.log('   ‚Ä¢ Determina√ß√£o da se√ß√£o ativa baseada na rota atual');
console.log('   ‚Ä¢ Fallback para navega√ß√£o interna quando necess√°rio');

console.log('\nüöÄ Para testar as corre√ß√µes:');
console.log('   1. Execute: npm run dev');
console.log('   2. Navegue para diferentes √°reas usando o menu');
console.log('   3. Verifique se a URL muda corretamente');
console.log('   4. Teste em dispositivos m√≥veis e desktop'); 